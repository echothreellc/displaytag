<?xml version="1.0" encoding="UTF-8"?>
<document>
    <properties>
        <title>Export filter</title>
        <author email="fgiust(at)users.sourceforge.net">Fabrizio Giustina</author>
    </properties>
    <body>
        <section name="Export filter? What's that?">
            <p>
                When displaytag exports data in any non-html format, it needs to change the content type returned to the
                browser and reset any other content generated by the surrounding page.
            </p>
            <p>
                Sometimes this can't be done: if content has already been sent back to the user, the response can't be
                reset and you get an error. This could happen because:
            </p>
            <ul>
                <li>
                    Too many chars have been already written to the response, so that the response buffer was full and response
                    has been automatically flushed.
                </li>
                <li>
                    Something (tags? java snippets?) before the
                    <code>display:table</code>
                    tag has explicitely flushed the response (
                    <code>response.flushBuffer()</code>
                    ).
                </li>
                <li>
                    Your page is dinamically included into another page. This happens for example using Struts tiles.
                </li>
            </ul>
        </section>

        <section name="the solution">
            <p>
                The first attempt can be using a larger page buffer in your jsp pages, for example:
                <source>&lt;%@ page buffer = "16kb" %&gt;</source>
                However, this can work only if you are in the first situation listed above.
            </p>
            <p>
                In j2ee 1.3/jsp 1.2 containers you can take advantage of filters to solve the problem. Displaytag ships
                with a filter which works together whit the table tag during export, disallowing the response to be
                flushed when an export has been requested.
            </p>
            <p>
                The
                <a href="install.html">install</a>
                document show how to configure the filter in your web.xml.
            </p>
        </section>

    </body>
</document>

